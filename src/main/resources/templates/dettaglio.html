<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Bibliothè | Dettaglio</title>
	<link rel="icon" type="image/png" th:href="@{/img/favicon.ico}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link th:href="@{/css/style.css}" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="/src/main/resources/static/js/script.js"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Barrio&display=swap" rel="stylesheet">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@600&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Includi jQuery da un CDN -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

	<!-- Includi Popper.js da un CDN -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>

	<!-- Includi MDB JS da un CDN -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>



	<script>
		$(document).ready(function () {
			$('#apriPopupButton').on('click', function () {
				$('#mioPopup').modal('show');
			});

			$('#chiudiPopupButton').on('click', function () {
				$('#mioPopup').modal('hide');
			});

			// Inizializza il rating
			$('#star-rating .star').click(function () {
				var rating = $(this).data('rating');

				// Rimuovi la classe 'selected' da tutte le stelle
				$('#star-rating .star').removeClass('selected');

				// Aggiungi la classe 'selected' solo alle stelle selezionate
				$('#star-rating .star:lt(' + rating + ')').addClass('selected');

				if (rating == 1) {
					$('#rating-value').text('Hai dato ' + rating + ' punto!');
				} else {
					$('#rating-value').text('Hai dato ' + rating + ' punti!');
				}
			});

		});

	</script>

	<script>
		$(document).ready(function () {
			// Array di nomi delle immagini
			var imageNames = [
				'bimba1',
				'bimba2',
				'bimba3',
				// Aggiungi altri nomi delle immagini secondo necessità
			];

			// Ottieni un numero casuale per selezionare un nome di immagine dal array
			var randomIndex = Math.floor(Math.random() * imageNames.length);

			// Costruisci l'URL completo dell'immagine
			var imageUrl = '/img/' + imageNames[randomIndex] + '.png';

            // Crea un nuovo elemento immagine
            var imgElement = $('#bimba');
            imgElement.attr('src', imageUrl);

		});
	</script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var titles = document.querySelectorAll('.titoloDett, .sinossi-content');

			titles.forEach(function (title) {
				var randomColor = getRandomColor();
				title.style.backgroundColor = randomColor;
			});

			// Funzione per ottenere un colore casuale dalla tua lista
			function getRandomColor() {
				var colors = ['#EF7E6B', '#9AD0C3', '#F8C77A', '#98D4E1'];
				var randomIndex = Math.floor(Math.random() * colors.length);
				return colors[randomIndex];
			}
		});
	</script>



</head>

<body>

	<div class="container">
		<div class="head">
			<nav id="navbar"
				class="navbar navbar-toggleable-sm bg-faded navbar-light fixed-top fixed-top-2 justify-content-center mb-0">
				<div class="d-flex align-items-center">
					<div class="dropdown col-3">
						<button class="dropbtn">Autori</button>
						<div class="dropdown-content ">
							<a th:each="a: ${autori}" th:text="${a.cognome}"
								th:href="@{/catalogo/autore/{id}(id=${a.id})}"></a>
						</div>
						
					</div>
					<div class="dropdown col-3">
						<button class="dropbtn">Generi</button>
						<div class="dropdown-content">
							<a th:each="g: ${generi}" th:text="${g.nomeGenere}"
								th:href="@{/catalogo/genere/{id}(id=${g.id})}"></a>
						</div>
					</div>
					<div class="dropdown col-3">
						<button class="dropbtn">Editori</button>
						<div class="dropdown-content">
							<a th:each="c: ${caseEditrici}" th:text="${c.nomeCasa}"
								th:href="@{/catalogo/caseEditrici/{id}(id=${c.id})}"></a>
						</div>
					</div>
				</div>
			</nav>

			<nav id="navbar2" class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
				<div class="container-fluid">
					<a class="navbar-brand" th:href="@{/}"><img th:src="@{'/img/logo-lungo.png'}" alt="logo Bibliothè" id="logo"/></a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
						aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarNav">
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link" th:href="@{/}">Home</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" th:href="@{about}">Chi siamo</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" th:href="@{catalogo}">Libri</a>
							</li>
							
						</ul>
					</div>
				</div>
			</nav>
		</div>
		<!--FINE NAVBAR-->
		
		<!--BODY DELLA PAGINA DETTAGLIO-->
		<div class="body">
			<div class="col-lg-10 mx-auto ">
				<h1 id="dettaglio" class="text-center">Dettaglio</h1>
				<div id="cardDett" class="card card-with-shadow">
					<div class="card-body">
						<div class="row">
							<div class="col-lg-6 col-md-12 col-sm-12">
								<div class="white-box text-center"><img id="covercatalogo"
										th:src="${dettaglio.copertina}" alt="cover" class="img-responsive"></div>
							</div>
							<div class="col-lg-6 col-md-12 col-sm-12">
								<h4 id="dettTitolo"th:text="${dettaglio.titolo}" class="box-title titoloDett"></h4>
								<h6 th:text="${dettaglio.autore.nomeAutore}+' '+${dettaglio.autore.cognome}"
									class="box-title mt-3"></h6>
								<p  class="box-title mt-3" th:text="${dettaglio.autore.biografia}"></p>
								<h5 class="box-title mt-5 titoloDett">Dettagli</h5>
								<ul class="list-unstyled mt-3">
									<li th:text="'Genere: '+${dettaglio.genere.nomeGenere}"></li>
									<li th:text="'Casa editrice: '+${dettaglio.casaEditrice.nomeCasa}"></li>
									<li th:text="'Anno di pubblicazione: '+${dettaglio.annoEdizione}"></li>
									<li th:text="'ISBN: ' + ${dettaglio.ISBN}"></li>
								</ul>
								<ul class="list-unstyled">
									<li th:text="'Stato: '+${dettaglio.stato ? 'Non disponibile' : 'Disponibile'}"></li>
									<div th:if="${alert}" th:text="'Libro prenotato! Vieni a ritirarlo in sede, ti aspettiamo!'" class="alert alert-success mt-3"
										role="alert">									
										</div>
									<button id="apriPopupButton" class="btn btn-secondary btn-rounded"
										th:if="${dettaglio.stato == false}"> Richiedi prenotazione </button>


									<!-- Model -->
										<div class="modal fade" id="mioPopup" tabindex="-1" role="dialog"
										aria-labelledby="mioPopupLabel" aria-hidden="true">
										<div class="modal-dialog" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<!-- aggiungere il "prenota" prima del testo titolo -->
													<h5 class="modal-title" id="mioPopupLabel"
														th:text="${dettaglio.titolo}"></h5>
													<button id="chiudiPopupButton" type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
											          <span aria-hidden="true"></span>
											        </button>
												</div>
												<div class="modal-body">
													<!-- Contenuto del tuo popup -->
													
													<form th:action="@{/dettaglio/prenota(id=${dettaglio.id})}"
														method="post">
														<div class="form-group">
															<label for="recipient-name" class="col-form-label" required>Nome:</label>
															<input class="form-control" type="text" id="nome" name="nome" required />
														</div>
														
														<div class="form-group">
															<label for="recipient-surname" class="col-form-label">Cognome:</label>
															<input class="form-control" type="text" id="cognome" name="cognome" required />
														</div>
														<div class="modal-footer">						
															<button type="submit"
																	class="btn btn-secondary btn-rounded">Prenota</button>
														</div>
													</form>
												</div>							
											</div>
										</div>
									</div>									
								
							</div>

						</div>
						<div id="sinossi" class="col-lg-12 col-md-12 col-sm-12">
							<h5 class="box-title mt-5 titoloDett">Sinossi</h5>
							<div class="table-responsive">
								<p class="box-title mt-3" th:text="${dettaglio.trama}"></p>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
<!--FORM PER LASCIARE UN COMMENTO-->
	<div class="card col-9 mx-auto" style="margin-top: 80px;">
		<div class="row ">
			<div class="col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12">
				<img id="bimba" alt="img"><img>
			</div>
			<div class="col-xl-10 col-lg-10 col-md-10 col-sm-12 col-12">
				<div class="comment-box custom-margin">
					<h4>Cosa pensi di questo libro? Scrivilo qui!</h4>				
					<div class="container">						
						<div id="star-rating" class="rating">
							<span class="star" data-rating="1">&#9733;</span>
							<span class="star" data-rating="2">&#9733;</span>
							<span class="star" data-rating="3">&#9733;</span>
							<span class="star" data-rating="4">&#9733;</span>
							<span class="star" data-rating="5">&#9733;</span>
						</div>
						<p id="rating-value"></p>
					</div>
					<div class="comment-area">
						<input type="text" class="form-control" id="name" placeholder="nickname">
						<textarea class="form-control" placeholder="Commenta" rows="4"></textarea>
					</div>
					<div class="comment-btns mt-2">
						<div class="row">
							<div class="col-6">
								<div class="pull-left">
									<button class="btn btn-success btn-sm">Cancella</button>
								</div>
							</div>
							<div class="col-6">
								<div class="pull-right">
									<button class="btn btn-success send btn-sm">Invia<i class="fa ml-1"></i></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--FINE FORM-->
	
	<!--AREA COMMENTI CHE NON SI VEDE PERCHé VA SISTMATO IL DB E IL CONTROLLER-->
	<div class="be-comment-block" th:if="${commentFormSubmitted}">
    <h1 class="comments-title">Commenti</h1>
		<div class="be-comment-content">
			<span class="be-comment-name">
				<a href="blog-detail-2.html">Phoenix <svg class="gig-rating" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" width="15" height="15">
                                            <path
                                                fill="currentColor"
                                                d="M1728 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z"
                                            ></path>
                                        </svg>
                                        5.0</a>
			</span>
			
			<span class="be-comment-time">
				<i class="fa fa-clock-o"></i>
				May 27, 2015 at 3:14am
			</span>
			<p class="be-comment-text">
				Nunc ornare sed dolor sed mattis. In scelerisque dui a arcu mattis, at maximus eros commodo. Cras magna nunc, cursus lobortis luctus at, sollicitudin vel neque. Duis eleifend lorem non ant. Proin ut ornare lectus, vel eleifend est. Fusce hendrerit dui in turpis tristique blandit.
			</p>
		</div>
		</div>
	<!--FINE AREA COMMENTI -->
	
	<!--FOOTER-->
	<footer id="footer" class="overflow-hidden">
		<div class="container">
			<div class="row">
				<div class="footer-top-area">
					<div class="row d-flex flex-wrap justify-content-between">
						<div class="col-lg-3 col-sm-6 pb-3">
							<div class="footer-menu">
								<img id="logofooter" th:src="@{'/img/1.png'}" alt="logo">
								<p>Nisi, purus vitae, ultrices nunc. Sit ac sit suscipit hendrerit. Gravida massa
									volutpat aenean odio erat nullam fringilla.</p>
							</div>
						</div>
						<div class="col-lg-2 col-sm-6 pb-3">
							<div class="footer-menu text-uppercase">
								<h5 class="widget-title pb-2">Link veloci</h5>
								<ul class="menu-list list-unstyled text-uppercase">
									<li class="menu-item pb-2">
										<a th:href="@{/}">Home</a>
									</li>
									<li class="menu-item pb-2">
										<a th:href="@{/about}">Chi siamo</a>
									</li>
									<li class="menu-item pb-2">
										<a th:href="@{/catalogo}">Libri</a>
									</li>
								</ul>
							</div>
						</div>
						<div class="col-lg-3 col-sm-6 pb-3">
							<div class="footer-menu">
								<h5 class="widget-title pb-2 text-uppercase">Il nostro team</h5>
								<ul class="menu-list list-unstyled">
									<li class="menu-item pb-2">
										<p>Claudia Vaiana</p>
									</li>
									<li class="menu-item">
										<p>Elisa Colombi</p>
									</li>
									<li class="menu-item">
										<p>Jessica Ruggeri</p>
									</li>
									<li class="menu-item">
										<p>Sara Di Meo</p>
									</li>
									<li class="menu-item">
										<p>Sara Sgrigna</p>
									</li>
									<li class="menu-item">
										<p>Maria Elena Marrocco</p>
									</li>
								</ul>
							</div>
						</div>
						<div class="col-lg-3 col-sm-6 pb-3">
							<div class="footer-menu contact-item">
								<h5 class="widget-title text-uppercase pb-2">Contattaci</h5>
								<p>Hai riscontrato problemi con i nostri libri? O con la nostra selezione di tè?
									Scrivici: <a href="mailto:">info@bibliothe.com</a>
								</p>
								<p>O chiamaci: <a href="">+39 111 222 333 44</a>
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<hr>
		<div id="footer-bottom">
			<div class="container">
				<div class="row d-flex flex-wrap justify-content-between">
					<div class="col-md-4 col-sm-6">
						<div class="Shipping d-flex">
							<p>© Copyright 2024 Bibliothè</p>

						</div>
					</div>
					<div class="col-md-4 col-sm-6">
						<div class="Shipping d-flex">
							<p> Contattaci su: <a href="mailto:info@bibliothe.it">info@bibliothe.it</a></p>

						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>

</body>

</html>